#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if --no-verify flag is used
# You can skip tests by running: git push --no-verify

echo "ğŸ§ª Running tests before push..."
echo "ğŸ’¡ To skip tests, use: git push --no-verify"
echo ""

npm test

# If tests fail, prevent push
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Tests failed! Push aborted."
  echo "ğŸ’¡ Fix the tests or use 'git push --no-verify' to skip"
  exit 1
fi

echo ""
echo "âœ… All tests passed! Proceeding with push..."
